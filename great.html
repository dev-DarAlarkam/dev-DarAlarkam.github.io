<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>شهادات وإعلانات</title>
    <link href="https://fonts.googleapis.com/css2?family=Readex+Pro:wght@160..700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        /* General Styling */
        :root {
            --primary-color: #00934b;
            --secondary-color: #004623;
            --background-color: #f4f4f4;
            --text-color: #333;
        }

        * {
            direction: rtl;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Readex Pro', sans-serif;
            background-color: #f4f4f4;
            color: #333;
            line-height: 1.6;
        }

        /* Header Styling */
        header {
            background-color: var(--primary-color);
            color: var(--background-color);
            padding: 20px 0;
            text-align: center;
            position: sticky;
            top: 0;
            box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        header h1 {
            font-size: 2rem;
            font-weight: 600;
        }

        /* Main Content Styling */
        main {
            margin-top: 20px;
        }

        .section {
            padding: 40px 0;
            background-color: var(--background-color);
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .container {
            width: 80%;
            margin: 0 auto;
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #004623;
        }

        /* Navigation Table */
        table {
            width: 100%;
            border-collapse: collapse;
        }

        table, th, td {
            border: 1px solid #ddd;
        }

        th, td {
            padding: 15px;
            text-align: center;
        }

        thead {
            background-color: var(--primary-color);
            color: white;
        }

        tbody tr {
            transition: background-color 0.3s ease;
        }

        /* Form Styling */
        .form-container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--secondary-color);
        }

        input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 12px;
            font-size: 1rem;
            border: 2px solid #ddd;
            border-radius: 5px;
            transition: border-color 0.3s ease;
            font-family: 'Readex Pro', sans-serif;
        }

        input[type="text"]:focus, input[type="number"]:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Buttons Styling */
        button {
            background-color: var(--primary-color);
            color: var(--background-color);
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            font-family: 'Readex Pro', sans-serif;
            font-weight: 400;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin: 5px;
        }

        button:hover {
            background-color: var(--secondary-color);
        }

        button:disabled {
            background-color: grey;
            cursor: not-allowed;
        }

        .nav-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 0.9rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }

        /* Hidden sections */
        .hidden {
            display: none;
        }

        /* Success message */
        .success-message {
            color: var(--primary-color);
            font-weight: bold;
            margin-top: 10px;
        }

        .error-message {
            color: red;
            font-weight: bold;
            margin-top: 10px;
        }

        /* Footer Styling */
        footer {
            direction: ltr;
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 10px 0;
            margin-top: 20px;
            font-size: 0.9rem;
        }

        a {
            color: inherit;
            text-decoration: underline;
        }

        a:visited {
            color: inherit;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        section {
            animation: fadeIn 0.5s ease-in-out;
        }

        /* Preview Certificate */
        .certificate-preview {
            background-color: white;
            border: 3px solid var(--primary-color);
            padding: 40px;
            margin: 20px 0;
            text-align: center;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            border-radius: 10px;
        }

        .certificate-title {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 30px;
            font-weight: 700;
        }

        .certificate-text {
            font-size: 1.2rem;
            line-height: 2;
            margin-bottom: 20px;
        }

        .certificate-name {
            font-size: 2rem;
            color: var(--secondary-color);
            font-weight: 600;
            margin: 20px 0;
            text-decoration: underline;
        }

        .certificate-footer {
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .signature-line {
            border-bottom: 2px solid #333;
            width: 200px;
            text-align: center;
            padding-bottom: 5px;
        }
    </style>
</head>
<body>

    <header>
        <nav>
            <h1>إصدار شهادات وإعلانات</h1>
        </nav>
    </header>

    <main>
        
        <!-- Navigation Section -->
        <section id="nav-section" class="section">
            <div class="container">
                <table id="nav-table">
                    <thead>
                        <tr>
                            <th>إعلانات</th>
                            <th>شهادات</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><button class="nav-button" onclick="showSection('announcements')">إعلانات المنتدى الفكري</button></td>
                            <td><button class="nav-button" onclick="showSection('certificates')">شهادات التفوق</button></td>
                        </tr>
                        <tr>
                            <td><button class="nav-button" onclick="showSection('announcements')">إعلانات عامة</button></td>
                            <td><button class="nav-button" onclick="showSection('certificates')">شهادات المشاركة</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Certificate Generator Section -->
        <section id="certificate-section" class="section hidden">
            <div class="container">
                <h2>إنشاء شهادة</h2>
                <div class="form-container">
                    <form id="certificate-form">
                        <div class="form-group">
                            <label for="student-name">اسم الطالب:</label>
                            <input type="text" id="student-name" name="studentName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="teacher-name">اسم المعلم:</label>
                            <input type="text" id="teacher-name" name="teacherName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="year">السنة:</label>
                            <input type="number" id="year" name="year" min="2020" max="2030" required>
                        </div>

                        <div class="form-group">
                            <label for="certificate-type">نوع الشهادة:</label>
                            <select id="certificate-type" name="certificateType" required>
                                <option value="">اختر نوع الشهادة</option>
                                <option value="excellence">شهادة تفوق</option>
                                <option value="participation">شهادة مشاركة</option>
                                <option value="completion">شهادة إتمام</option>
                            </select>
                        </div>
                        
                        <button type="button" onclick="generatePreview()">معاينة الشهادة</button>
                        <button type="button" onclick="generatePDF()" id="pdf-button" disabled>تحميل PDF</button>
                        <button type="button" onclick="showNavigation()">العودة للقائمة الرئيسية</button>
                    </form>
                    
                    <div id="message"></div>
                </div>

                <!-- Certificate Preview -->
                <div id="certificate-preview" class="certificate-preview hidden">
                    <div class="certificate-title">شهادة تقدير</div>
                    <div class="certificate-text">
                        نشهد بأن الطالب/الطالبة
                    </div>
                    <div class="certificate-name" id="preview-name">اسم الطالب</div>
                    <div class="certificate-text" id="preview-text">
                        قد حقق/ت إنجازاً متميزاً في الأنشطة التعليمية
                    </div>
                    <div class="certificate-footer">
                        <div>
                            <div class="signature-line" id="preview-teacher">اسم المعلم</div>
                            <div>المعلم المشرف</div>
                        </div>
                        <div>
                            <div>دار الأرقم</div>
                            <div id="preview-year">2025</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Announcements Section (Placeholder) -->
        <section id="announcements-section" class="section hidden">
            <div class="container">
                <h2>إنشاء إعلان</h2>
                <div class="form-container">
                    <p>قريباً... سيتم إضافة وظيفة إنشاء الإعلانات</p>
                    <button type="button" onclick="showNavigation()">العودة للقائمة الرئيسية</button>
                </div>
            </div>
        </section>
        
    </main>

    <footer>
        <p>&copy; 2025 <a href="https://www.facebook.com/dar9alarkam" target="_blank">دار الأرقم</a>. جميع الحقوق محفوظة.</p>
    </footer>

    <script>
        // Global variables
        let certificateData = {};

        // Navigation functions
        function showSection(type) {
            // Hide all sections
            document.getElementById('nav-section').classList.add('hidden');
            document.getElementById('certificate-section').classList.add('hidden');
            document.getElementById('announcements-section').classList.add('hidden');

            // Show selected section
            if (type === 'certificates') {
                document.getElementById('certificate-section').classList.remove('hidden');
            } else if (type === 'announcements') {
                document.getElementById('announcements-section').classList.remove('hidden');
            }
        }

        function showNavigation() {
            // Hide all sections
            document.getElementById('certificate-section').classList.add('hidden');
            document.getElementById('announcements-section').classList.add('hidden');
            document.getElementById('certificate-preview').classList.add('hidden');
            
            // Show navigation
            document.getElementById('nav-section').classList.remove('hidden');
            
            // Reset form
            document.getElementById('certificate-form').reset();
            document.getElementById('pdf-button').disabled = true;
            document.getElementById('message').innerHTML = '';
        }

        // Certificate generation functions
        function generatePreview() {
            const studentName = document.getElementById('student-name').value;
            const teacherName = document.getElementById('teacher-name').value;
            const year = document.getElementById('year').value;
            const certificateType = document.getElementById('certificate-type').value;

            if (!studentName || !teacherName || !year || !certificateType) {
                document.getElementById('message').innerHTML = '<div class="error-message">يرجى ملء جميع الحقول المطلوبة</div>';
                return;
            }

            // Store data for PDF generation
            certificateData = {
                studentName,
                teacherName,
                year,
                certificateType
            };

            // Update preview
            document.getElementById('preview-name').textContent = studentName;
            document.getElementById('preview-teacher').textContent = teacherName;
            document.getElementById('preview-year').textContent = year;

            // Update certificate text based on type
            const certificateTexts = {
                'excellence': 'قد حقق/ت تفوقاً أكاديمياً متميزاً',
                'participation': 'قد شارك/ت بفعالية في الأنشطة التعليمية',
                'completion': 'قد أتم/ت بنجاح المتطلبات الدراسية'
            };

            document.getElementById('preview-text').textContent = certificateTexts[certificateType];

            // Show preview and enable PDF button
            document.getElementById('certificate-preview').classList.remove('hidden');
            document.getElementById('pdf-button').disabled = false;
            document.getElementById('message').innerHTML = '<div class="success-message">تم إنشاء معاينة الشهادة بنجاح</div>';
        }

        function generatePDF() {
            if (!certificateData.studentName) {
                document.getElementById('message').innerHTML = '<div class="error-message">يرجى إنشاء معاينة الشهادة أولاً</div>';
                return;
            }

            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF({
                    orientation: 'landscape',
                    unit: 'mm',
                    format: 'a4'
                });

                // Set up RTL support (basic)
                doc.setLanguage('ar');

                // Certificate border
                doc.setLineWidth(3);
                doc.setDrawColor(0, 147, 75); // Primary green color
                doc.rect(10, 10, 277, 190);

                // Inner border
                doc.setLineWidth(1);
                doc.rect(15, 15, 267, 180);

                // Title
                doc.setFontSize(36);
                doc.setTextColor(0, 147, 75);
                doc.text('Certificate of Achievement', 148.5, 50, { align: 'center' });
                
                doc.setFontSize(24);
                doc.text('شهادة تقدير', 148.5, 65, { align: 'center' });

                // Main text
                doc.setFontSize(16);
                doc.setTextColor(0, 0, 0);
                doc.text('This is to certify that', 148.5, 90, { align: 'center' });
                doc.text('نشهد بأن الطالب/الطالبة', 148.5, 100, { align: 'center' });

                // Student name
                doc.setFontSize(28);
                doc.setTextColor(0, 70, 35);
                doc.text(certificateData.studentName, 148.5, 120, { align: 'center' });

                // Achievement text
                doc.setFontSize(16);
                doc.setTextColor(0, 0, 0);
                const certificateTexts = {
                    'excellence': 'has achieved academic excellence',
                    'participation': 'has participated actively in educational activities',
                    'completion': 'has successfully completed the academic requirements'
                };
                doc.text(certificateTexts[certificateData.certificateType], 148.5, 140, { align: 'center' });

                // Footer
                doc.setFontSize(14);
                doc.text('Teacher: ' + certificateData.teacherName, 50, 170);
                doc.text('المعلم: ' + certificateData.teacherName, 50, 180);

                doc.text('Dar Al-Arqam', 250, 170);
                doc.text('دار الأرقم', 250, 180);
                doc.text(certificateData.year, 250, 190);

                // Save the PDF
                const fileName = `Certificate_${certificateData.studentName}_${certificateData.year}.pdf`;
                doc.save(fileName);

                document.getElementById('message').innerHTML = '<div class="success-message">تم تحميل الشهادة بنجاح!</div>';

            } catch (error) {
                console.error('Error generating PDF:', error);
                document.getElementById('message').innerHTML = '<div class="error-message">حدث خطأ في إنشاء ملف PDF</div>';
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year as default
            document.getElementById('year').value = new Date().getFullYear();
        });
    </script>

</body>
</html>